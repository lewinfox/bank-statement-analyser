<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Upload CSV - Personal Finance Dashboard</title>
    <link rel="stylesheet" href="css/style.css" />
  </head>
  <body>
    <div class="container">
      <!-- Header will be loaded here -->
      <div id="header-container"></div>

      <main id="main-content">
        <div class="view active">
          <h2>Upload CSV</h2>
          <p>
            Upload your bank statement CSV file to automatically import
            transactions.
          </p>

          <div class="upload-container">
            <form id="csv-upload-form" class="upload-form">
              <div class="file-input-group">
                <label for="csv-file" class="file-label"
                  >Choose CSV File:</label
                >
                <input
                  type="file"
                  id="csv-file"
                  name="csvFile"
                  accept=".csv"
                  required
                  class="file-input"
                />
                <span class="file-name" id="file-name">No file selected</span>
              </div>

              <div class="upload-info">
                <h3>CSV Format Requirements:</h3>
                <ul>
                  <li>File must be in CSV format (.csv)</li>
                  <li>Maximum file size: 5MB</li>
                  <li>Required columns: Type, Details, Amount, Date</li>
                  <li>Date format: DD/MM/YYYY (e.g., 31/03/2025)</li>
                  <li>
                    Optional columns: Particulars, Code, Reference,
                    ForeignCurrencyAmount, ConversionCharge
                  </li>
                </ul>
              </div>

              <button type="submit" class="upload-btn" id="upload-btn">
                <span class="btn-text">Upload Transactions</span>
                <span
                  class="btn-spinner"
                  id="upload-spinner"
                  style="display: none"
                  >Uploading...</span
                >
              </button>
            </form>

            <div
              id="upload-results"
              class="upload-results"
              style="display: none"
            >
              <h3>Upload Results</h3>
              <div class="results-summary">
                <div class="result-item">
                  <span class="result-label">Total Rows:</span>
                  <span class="result-value" id="total-rows">0</span>
                </div>
                <div class="result-item success">
                  <span class="result-label">Successfully Added:</span>
                  <span class="result-value" id="successful-added">0</span>
                </div>
                <div class="result-item warning">
                  <span class="result-label">Duplicates Ignored:</span>
                  <span class="result-value" id="duplicates-ignored">0</span>
                </div>
                <div class="result-item error">
                  <span class="result-label">Errors:</span>
                  <span class="result-value" id="errors-count">0</span>
                </div>
              </div>

              <div
                id="error-details"
                class="error-details"
                style="display: none"
              >
                <h4>Error Details:</h4>
                <ul id="error-list"></ul>
              </div>

              <div class="results-actions">
                <button type="button" class="secondary-btn" id="upload-another">
                  Upload Another File
                </button>
                <button
                  type="button"
                  class="primary-btn"
                  id="view-transactions"
                >
                  View Transactions
                </button>
              </div>
            </div>

            <div
              id="upload-message"
              class="message"
              style="display: none"
            ></div>
          </div>
        </div>
      </main>
    </div>

    <!-- Scripts -->
    <script type="module" src="js/app.js"></script>
  </body>
</html>
